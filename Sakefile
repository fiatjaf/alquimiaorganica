js:
  help: the javascript app
  dependencies:
    - '*.coffee'
    - package.json
  output:
    - bundle.js
  formula: >
    ./node_modules/.bin/browserifyinc -t coffeeify --extension='.coffee' app.coffee > bundle.js

css:
  help: the less file to css
  dependencies:
    - style.less
  output:
    - bundle.css
  formula: >
    ./node_modules/.bin/lessc style.less > bundle.css

html:
  help: turn .md files into .html files
  dependencies:
    - '*.md'
    - template.html
  formula: >
    for md in *.md; do
      fname=$(echo $md | py -x 'x[:-3] + ".html"');
      content=$(cat $md | ./node_modules/.bin/marked --gfm --breaks --tables --sanitize --smart-lists);
      cat template.html > $fname;
      echo $content >> $fname;
    done;
  output:
    - '*.html'
